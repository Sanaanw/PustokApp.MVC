@model List<Brand>
<table class="table">
   
    <a asp-area="Manage" asp-controller="Brand" asp-action="Create"
       style="margin-bottom: 20px; margin-left: 40px;"
       class="btn btn-success">Create New</a>


    @{
        int count = 1;
    }
    <thead>
        <tr>
            <th scope="col">Id</th>
            <th scope="col">Name</th>
            <th scope="col">Created Date</th>
            <th scope="col">Updated Date</th>
            <th scope="col">Settings</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var Brand in Model)
        {
            <tr>
                <th scope="row">@count</th>
                <td>@Brand.Name</td>
                <td>@Brand.CreateDate.ToString("dd MMMM, yyyy")</td>
                <td>@Brand.UpdateDate?.ToString("dd MMMM, yyyy")</td>
                <td>
                    <a asp-area="Manage" asp-controller="Brand" asp-action="Edit" asp-route-id="@Brand.Id" class="btn btn-primary"> Edit </a>
                    <a asp-area="Manage" asp-controller="Brand" asp-action="Detail" asp-route-id="@Brand.Id" class="btn btn-primary"> Detail </a>
                    <a asp-area="Manage" asp-controller="Brand" asp-action="Delete" asp-route-id="@Brand.Id" class="btn btn-danger deleteBrand"> Delete </a>
                </td>
            </tr>
            count++;
        }
        @section scripts {
          <script>
                              $(document).ready(function () {
                    $('.deleteBrand').on('click', function (e) {
                        e.preventDefault();

                        Swal.fire({
                            title: "Are you sure?",
                            text: "You won't be able to revert this!",
                            icon: "warning",
                            showCancelButton: true,
                            confirmButtonColor: "#3085d6",
                            cancelButtonColor: "#d33",
                            confirmButtonText: "Yes, delete it!"
                        }).then((result) => {
                            if (result.isConfirmed) {
                                var url = $(this).attr('href');
                                fetch(url)
                                    .then(response => {
                                        if (response.ok) {
                                            Swal.fire({
                                                title: "Deleted!",
                                                text: "Your file has been deleted.",
                                                icon: "success"
                                            });
                                        setTimeout(function() {
                                                     window.location.reload();
                                                              }, 1000);
                                        } else {
                                            Swal.fire({
                                                icon: "error",
                                                title: "Oops...",
                                                text: "Something went wrong!",
                                            });
                                        }
                                    })
                            }
                        });
                    });
                });

          </script>

        }

    </tbody>
</table>
<div style="margin:400px;margin-top:50px" class="container">
    <div class="row">
        <nav aria-label="...">
            <ul class="pagination">
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1">Previous</a>
                </li>
                @for (int i = 1; i <= ViewBag.PageCount; i++)
                 {
                    <li class="page-item @(ViewBag.CurrentPage==i?"active disabled":"")" style="@(ViewBag.CurrentPage==i?"background-color: deepskyblue;":"")">
                        <a class="page-link" asp-action="Index" asp-route-page="@i" > @i <span class="sr-only">(current)</span></a>
                    </li>
                 }
                <li class="page-item">
                    <a class="page-link @(ViewBag.CurrentPage>=ViewBag.PageCount?"disabled":"") " asp-action="Index" asp-route-page="@ViewBag.CurrentPage+1" >Next</a>
                </li>
            </ul>
        </nav>
    </div>
</div>